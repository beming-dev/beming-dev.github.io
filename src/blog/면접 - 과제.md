## 리팩토링

리팩토링 과정에서 가장 신경 쓴 것은 
- 적절한 모듈 간 분리
- Controller, Service, Repository의 구분
- Domain Entity 정의
이렇게 세 가지 입니다.

먼저, 적절한 도메인으로 모듈을 분리했습니다. 이렇게 분리한 이유는 도메인을 각각 분리하여 관리할 수 있도록 하기 위함이고, 의존성을 덜어내기 위함입니다.

그리고 Controller, Service, Repository를 구분한 이유는 각 모듈 내에서 책임을 분리하기 위함입니다. Controller는 외부와의 입출력을 담당하고, Service는 비즈니스 로직을 관리, Repository는 DB와의 접근을 위함입니다.
이 중에서 Repository는 특별히 Interface를 정의하고 의존성 주입 개념을 사용했는데, DB에 대한 의존성을 완전히 덜어내기 위함입니다.

주어진 예제에서 데이터베이스로는 SQLite, 그리고 Mikro-ORM을 사용하고 있습니다. SQLite는 서비스 규모가 커지면 다른 DB로 교체될 가능성이 높고, Mikro-ORM도 언제든 변경될 수 있고, ORM으로 해결할 수 없는 경우가 있을 수 있습니다.

그래서 언제든 DB를 교체할 수 있도록 Repository Interface를 정의하고, Service에서는 Interface에 정의된 기능만 사용합니다.

이 때, Domain Entity의 개념이 나오는데, DB Entity와 별개로 Domain Entity를 사용하면 DB와의 의존성을 조금 더 확실히 제거할 수 있습니다. 또한 핵심 비즈니스 로직을 Domain Entity로 위임하여 좀 더 엄밀히 관리할 수 있고, 데이터 무결성을 강화할 수도 있습니다.

또한 이렇게 분리했을 때의 장점은 테스트가 쉬워집니다. 
Repository, Entity 등등을 Mocking 하기 쉬워지고, 테스트하고 싶은 부분만 확실하게 테스트 가능합니다.

## 요구사항

### ISSUE #1. 회의실 예약 대기 기능 추가

reservation에 status 필드를 추가하고 예약 생성, 변경 시 겹치는 경우 대기 상태로 만들었습니다.
특정 예약이 취소, 변경되는 경우 대기 상태에 있는 예약 중 처리할 수 있는 것을 처리하도록 했습니다.

roomId와 date를 사용해서 모든 데이터를 불러오고 status filter로직을 사용했는데, 애초에 DB 쿼리로 필터된걸 읽어오면 더 좋을것 같습니다.

DB 읽기가 좀 많이 발생하는 문제 있음. 이거 수정하면 성능상 훨 괜찮을듯

### ISSUE #2. 회의실 예약 알림 기능 추가

알림이 필요한 곳에서 가져다 쓸 수 있도록 Notification을 위한 Module을 추가했습니다.

알림은 다양한 옵션이 존재하고, 미래에 확장될 수 있기 때문에, 전략 패턴과 팩토리 패턴을 사용했습니다.


### ISSUE #3. API Key 인증 방식 지원

/server/src/modules/apiKeys에 구현해 두었습니다.
프론트 페이지의 "api key 생성" 버튼을 클릭하여 사용 가능합니다.

### ISSUE #4. 회의실 예약 수정/취소 권한 처리

/server/src/modules/reservations/reservations.service.ts의
updateReservation, deleteReservation 로직에 organizer와 요청을 보낸 사람의 id를 비교하는 조건문을 추가하였습니다.

### ISSUE #5. 잘못된 날짜/시간으로도 예약 가능

/server/src/modules/reservations/reservations.entity.ts의
도메인 엔티티 생성자에서 날짜, 시간의 유효성을 검증하는 로직을 추가했습니다.

### ISSUE #6. 검색 시스템 개선

/frontend/src/hooks/useReservationForm.ts에
300ms 간격으로 api 요청이 가도록 디바운싱 로직을 추가했습니다.

Person테이블의 name에 index를 설정하였습니다.
## 개선할 점

1. VO

## Getter, Setter 왜 안함?

## Domain Entity를 왜 불변성 가지게 함?
