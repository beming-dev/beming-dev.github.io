- CodePipeline을 사용하여 Git에서 코드를 가져와 CodeBuild에서 빌드하고, Docker 이미지를 ECR에 저장한 후, CodeDeploy를 통해 EC2에서 컨테이너를 배포하는 방식으로 구성했습니다.
- 기존 Heroku서비스의 비용이 높았다. 해결방안을 위해 AWS 비용을 분석했고, 더 여유로운 memory를 더 저렴한 가격에 이용할 수 있어서 선택했다. CodePipeline을 이용하면 단계별 배포 과정을 시각적으로 모니터링할 수 있어 유지보수도 용이합니다.
- ECR은 - AWS 내에서 관리되므로 EC2, ECS, EKS 등과의 연동이 용이함 IAM을 이용한 보안 설정이 쉬움. Docker Hub보다 네트워크 전송 비용 절감 가능

## EC2에서 배포하는 방식이 ECS, EKS 등과 비교했을 때 어떤 장점과 단점이 있다고 생각하나요?

## CodeBuild의 역할이 무엇인가요?

## 어떤 배포 방식
In-Place 배포 방식 사용. 기존 컨테이너 종료, 새로운 컨테이너 실행.
중간에 서비스 끊김이 발생할 수 있어, 그 부분은 load balancer와 같은 개념을 적용할 수 있다면 적용해 볼 예정

## 배포 실패시
자동 롤백으로 복구
codedeploy와 cloudwatch의 로그 분석

## 향후 개선방안
EKS/ECS와 비교해 보고 싶다.

EC2기반이라 오토스케일링이 어렵다. 자주 사용되는 route들을 MSA로 분리해보려고 ELK에서 url당 요청이 얼마나 들어왔는지 분석해뒀다.

다운타임 최소화
- Docker 이미지를 빌드할 때, 변경된 부분만 다시 빌드하도록 `--cache-from` 옵션을 사용하여 **레이어 캐싱**을 적용했습니다.