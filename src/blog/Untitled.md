# Toss Node.js Developer Assignment

  

신규입사자 김토스는 첫 Node.js developer 업무로 사내 회의실 예약 시스템을 개선하는 작업을 맡았습니다. 이 예약 시스템은 기본적인 예약 기능과 참석자 관리 기능을 제공하고 있었지만, 최근 회사의 규모가 커지면서 여러 문제점들이 나타나기 시작했습니다.

요구사항에 맞춰 서버를 구현/수정해 주세요.

  

기존 시스템의 주요 기능은 다음과 같습니다:

  

- 사용자는 웹 인터페이스를 통해 회의실을 예약할 수 있습니다.

- 예약 시 회의실, 날짜, 시간, 참석자 등의 정보를 입력합니다.

- 사용자는 자신이 예약한 회의실의 일정을 확인하고 수정할 수 있습니다.

- 회의에 초대받은 사용자는 초대를 수락하거나 거절 할 수 있습니다.

  

## 제공되는 Backend API

  

```

GET    /api/health

  

POST   /api/v1/signin         #

POST   /api/v1/signout        #

  

GET    /api/v1/me             # 내 정보를 가져옵니다

GET    /api/v1/user/:id       # id에 해당하는 사용자 정보를 가져옵니다

GET    /api/v1/users?prefix=  # prefix% 로 사용자를 검색합니다

  

POST   /api/v1/reservation        # 회의실을 예약합니다

GET    /api/v1/reservation/:id    # id에 해당하는 예약정보를 가져옵니다

PATCH  /api/v1/reservation/:id    # id에 해당하는 예약을 수정합니다

DELETE /api/v1/reservation/:id    # id에 해당하는 예약을 삭제합니다

  

GET    /api/v1/reservations       # 내가 생성했거나 초대받은 예약목록을 가져옵니다

GET    /api/v1/reservations/:date # date에 시작하는 회의 목록을 가져옵니다

  

GET    /api/v1/rooms              # 회의실 목록을 가져옵니다

PUT    /api/v1/invitation/:reservationId  # reservationId로 초대를 수락/거절합니다

```

  

## Frontend 화면구성

  

```

/login            - 로그인 페이지 (JWT가 없거나 유효하지 않은 경우 이 페이지로 리디렉션)

/                 - 홈페이지 (본인이 생성했거나 초대된 회의실 예약목록 표시)

/reservation/:id  - 회의실 예약 수정 페이지

/reservation/new  - 회의실 예약 생성 페이지

```

  

### 모든 기능은 반드시 동작해야 하며, 동작이 되지 않는 경우 감점 사유가 될 수 있습니다.

  
  

## 개발환경 세팅

  

```

pnpm install && pnpm dev

```

로그인을 위한 정보는 `packages/server/src/database/database.seed-data.ts` 를 참고해 주세요.

  

서버를 처음 시작하는 경우 `packages/server/db.sqlite` 파일이 생성되고 데이터베이스가 초기화됩니다. 만약 데이터베이스의 데이터를 다시 초기화 하고 싶은 경우 해당 `db.sqlite` 파일을 삭제 한 뒤 다시 `pnpm dev`를 실행하면 됩니다.

프론트 구현물은 프로젝트 이해를 돕기 위해 있는 것이며, 수정을 하지 않으셔도 좋습니다.

  
  
  

## 신규 기능 개발

  

### ISSUE #1. 회의실 예약 대기 기능 추가

- 개요: 이미 예약된 회의실이 취소될 때까지 대기할 수 있는 기능을 추가하여 회의실 예약의 유연성을 높입니다.

- 상세 내용:

  - 다른 사용자가 이미 예약한 시간에도 사용자는 동일한 시간에 해당 회의실을 예약할 수 있습니다. 이 경우 예약은 바로 확정되지 않고 대기 중(PENDING) 상태로 진입합니다.

  - 기존 예약자가 회의실 예약을 취소/변경하면 해당 시간에 대기 중인 예약이 확정(FULFILLED)됩니다.

  - 대기 중인 예약은 먼저 대기 시작한 순서대로 처리됩니다.

  - 여러 시간에 걸쳐 예약 대기를 할 경우, 기존 예약이 취소되더라도 대기 중인 예약이 바로 확정되지 않을 수 있습니다. 예를 들어, 특정 회의실이 09:00부터 10:00까지 A에 의해 예약되어 있고, 10:00부터 11:00까지는 B에 의해 예약된 상황에서, C가 09:30부터 10:30까지 회의실을 사용하고자 예약 대기를 하면, A와 B가 모두 예약을 취소/변경하지 않는 한 C의 예약은 확정될 수 없습니다.

  - 이때, 바로 확정될 수 있는 예약 대기가 있다면 그것을 먼저 확정으로 처리합니다. 예를 들어, 위 상황에서 D가 09:00부터 10:00까지 예약 대기 중일 때, A가 예약을 취소하면 C의 예약 대기(09:30~10:30)는 B가 취소하기 전까지 확정될 수 없으나, D의 예약 대기는 바로 확정되어야 합니다.

  - 위 요구사항을 구현하는 과정에서 추가적으로 발생 할 수 있는 예외케이스는 회의실 가동률을 최대한 높이는 방향으로 처리해야 합니다.

  
  

### ISSUE #2. 회의실 예약 알림 기능 추가

- 개요: 회의실 예약에 대해서 참석자들에게 알림을 보내는 기능을 추가합니다.

- 상세 내용:

  - 회의실이 예약되었을 때 참석자들에게 초대 알림을 이메일 또는 SMS로 발송합니다.

  - 예약된 회의실이 변경/취소 되었을 때 참석자들에게 이메일 또는 SMS로 알림을 발송합니다.

  - 회의 시작 시간 10분 전에 참석자들에게 이메일 또는 SMS로 알림을 발송합니다.

  - 알림 메시지에는 회의실 이름, 예약 시간, 참석자 목록 등의 정보를 포함합니다.

  - 사용자 필드에 notification preference 필드를 추가하여 어떤 방식으로 알림을 받고 싶은지 설정 할 수 있습니다.

- 유의사항:

  - 실제 이메일을 보내지 않아도 되며 `sendEmail` 혹은 그와 비슷한 역할을 하는 함수/메소드를 만들어서 이를 호출하는 것으로 구현을 대체합니다. (src/notifications.ts)

  - 향후 카카오톡, 슬랙DM 등 알림 방식이 추가 될 가능성을 고려하여 확장 가능한 구조로 코드를 작성해주세요.

  
  

### ISSUE #3. API Key 인증 방식 지원

- 개요: 본 시스템을 API처럼 활용하여 다른 자동화 시스템과 연동 하고 싶다는 니즈가 있습니다

- 상세 내용:

  - 현재 본 시스템의 인증방식은 JWT로 인코딩된 인증정보를 Cookie에 저장한뒤 인증이 필요한 요청에 포함시켜주는 방식입니다.

  - API를 다른 서버 혹은 스크립트에서 직접 호출하고싶은 니즈가 있으며 이 때 API Key를 발급한 뒤 `Authentication: Bearer ${Key}` 헤더에 포함시켜주는 방식으로 인증방식을 확장하려고 합니다.

  - API Key를 발급하는 API를 만들어 주세요.

  - API Key는 유효기간을 정할 수 있어야 합니다.

  - API Key가 유출되었을 때를 대비하여 키를 Invalidate를 시킬 수 있어야 합니다.

- 유의사항:

  - 추후 API Key에 권한을 상세하게 설정할 수 있도록 요구사항이 추가될 예정이며 이에 대응할 수 있는 구조로 코드를 작성해주세요.

  

## 개선 및 리팩토링

  

### ISSUE #4. 회의실 예약 수정/취소 권한 처리

- 개요: 회의실 예약자 외 다른 사람도 수정/취소 가능. 예약한 사람만 수정/취소할 수 있도록 변경 필요.

- 재현 방법: 브라우저에서 본인이 만들지 않은 예약에 대해서 수정/취소 API를 직접 호출.

- 현재 상황: 본인이 만들지 않고 초대받은 예약에 대해서도 API를 직접 호출하는 방식으로 수정하거나 취소가 가능합니다.

  
  

### ISSUE #5. 잘못된 날짜/시간으로도 예약 가능

- 개요: 예약 날짜/시간이 잘못 되어도 예약 가능

- 재현 방법: 예약 생성 API를 직접 호출하여 잘못된 날짜를 body로 입력 (ex. "date": "2025-15-55")

- 현재 상황: 잘못된 예약이 정상적으로 생성되며 해당 예약을 보여주는 화면에서 에러가 발생합니다.

  
  

### ISSUE #6. 검색 시스템 개선

- 개요: 회의실 참여자 검색 시스템(`/api/v1/users?prefix=`)의 확장성 부족.

- 재현 방법: 회의실 참석자를 검색하는 필드를 입력하면 like 쿼리가 짧은 시간 내에 여러번 실행됨

- 현재 상황: 현재는 DB like 쿼리로 구현되어 레코드 증가 시 DB 부하 증가.

  
  

## 리팩토링

- 백엔드 코드는 서비스 레이어가 분리되어 있지 않고 `app.controller.ts`에 모두 구현되어 있습니다. 이 방법은 가독성과 유지보수 측면에서 좋지 않으며 적절한 레이어로 분리가 필요합니다.

  

## 테스트

- 테스트가 전혀 없습니다. 적절한 테스트 프레임워크를 선택해서 중요한 비즈니스 로직들을 위주로 테스트 커버리지를 높여주세요.

  
  

## 주의사항

과제의 저작권은 (주)비바리퍼블리카에 있습니다. GitHub와 같이 공개된 곳에 과제의 내용을 확인할 수 있는 소스 코드를 올리거나, 과제 및 과제 결과물이 유출되지 않도록 유의해주세요.